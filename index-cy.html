<!DOCTYPE HTML>
<html>

<head>
    <title>Map Dwfn Span</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1" />
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
    <script src="scripts/azure-storage.common.min.js"></script>
    <script src="scripts/azure-storage.blob.min.js"></script>
    <script src="scripts/jquery-3.4.1.min.js"></script>
    <script src="scripts/util.js"></script>
    <script src="scripts/sign-in.js"></script>
    <script src="scripts/exif-js.js"></script>
    <script src="scripts/model.js"></script>
    <script src="scripts/azuredb.js"></script>
    <script src="scripts/online-map.js"></script>
    <script src="scripts/text-edit.js"></script>
    <script src="scripts/deep-map.js"></script>
    <script src="scripts/track.js"></script>

    <link rel="icon" type="img/png" href="img/favicon96.png" sizes="96x96" />
    <link rel="icon" type="img/png" href="img/favicon32.png" sizes="32x32" />
    <link rel="icon" type="img/png" href="img/favicon16.png" sizes="16x16" />
    <link rel="stylesheet" type="text/css" href="css/deep-map.css" />

    <style>
        #splash {
            position: absolute;
            top: 0px;
            bottom: 0px;
            left: 0px;
            right: 0px;
            background-color: rgba(255, 255, 255, 0.8);
            z-index: 200;
        }

        #splash>div {
            border-radius: 10px;
            border: black solid 4px;
            background-color: white;
            font: sans-serif 18pt;
            color: darkblue;
            position: absolute;
            top: 5%;
            left: 10%;
            right: 10%;
            bottom: 5%;
            padding: 10px;
            display: block;
            overflow: auto;
        }

    </style>
</head>

<body onload="init()">
    <div>
        <div id='theMap' ondragover="dragOverMap(event)">
            <h2 style="color:grey;font-family: 'Times New Roman', Times, serif">&nbsp;
                <br />
                <br /> Llwytho'r map ... </h2>
        </div>
    </div>
    <div id="loosePicsShow"></div>
    <div id='topLeftControls'>
        <div id="usernamediv"></div>
        <div id='pauseButton' class='squareButton' onclick="onPauseButton()" title="Saib/ailddechrau olrhain">
            <small><b>&gt;</b></small></div>
        <div id='showHelpButton' class='squareButton' onclick="showHelp()" title="Help/amdanom">?</div>
        <div id="picLaundryFlag" title="Llwytho delwedd neu le ar y gweill, neu aros am gysylltiad>^</div>
        <div id='topMessage' style="visibility: hidden"></div>
    </div>
    <div id="target" class="target" title="Gosod lle o dan fan hyn wedyn cliciwch y botwm ar y dde i ychwanegu nodiadau">
        <div style="position:relative;top:10px">^</div>
    </div>
    <div id="addPlaceButton" class="addButton" title="Rhoi nodiadau a delweddau ar y map ar y pwynt targed"
        onclick="onAddPlaceButton(this)">+</div>

    <img id="mapbutton" onclick="mapsToggleType()" title="aerial/OS map" src="img/map-icon.png" />

    <div id="popup" class="floatingPopup">
        <div id="popuptextgroup">
            <div id="toolBar1">
                <div class="toolbutton" onclick="onFormatDoc('formatblock','h4')" title="Is-deitl">H</div>
                <div class="toolbutton" onclick="onFormatDoc('formatblock','div')" title="Paragraff plaen">¶</div>
                <div class="toolbutton" onclick="onFormatDoc('InsertText','â')">â</div>
                <div class="toolbutton" onclick="onFormatDoc('InsertText','ê')">ê</div>
                <div class="toolbutton" onclick="onFormatDoc('InsertText','î')">î</div>
                <div class="toolbutton" onclick="onFormatDoc('InsertText','ô')">ô</div>
                <div class="toolbutton" onclick="onFormatDoc('InsertText','û')">û</div>
                <div class="toolbutton" onclick="onFormatDoc('InsertText','ŵ')">ŵ</div>
                <div class="toolbutton" onclick="onFormatDoc('InsertText','ŷ')">ŷ</div>
                <!-- <div class="toolbutton" onclick="onCreateLink()" title="Dolen i dudalen we arall">Dolen</div> -->
            </div>
            <div id="popuptext" contenteditable="true"></div>
        </div>
        <div id="tags"> </div>
        <div id="author"> </div>
        <div id="popclose" onclick="closePopup()">X</div>
        <div class="picturebar">
            <span id="picPrompt">Ychwanegu &gt;</span>
            <div id="thumbnails"></div>
            <!-- The add button displays the ugly traditional "input file" and clicks it -->
            <div class="addButton addInlineButton" id="addPicToPlaceButton"
                onclick="showFileSelectDialog('uploadToPlaceButton')"
                title="Ychwanegu delweddau, ffeiliau sain neu ffilmiau i'r nodyn yma">+</div>
            <!-- But we set opacity:0 so the ugly input isn't visible, even when 'displayed' -->
            <input id="uploadToPlaceButton" style="display:none;opacity: 0;"
                onchange="doUploadFiles(this, this.files, g('popup').placePoint)" type="file" title="Llwytho"
                name="uploadToPlaceButton" multiple />
            <div id="getLinkButton" class="addButton addInlineButton" onclick="showLink(g('popup').placePoint.place)"
                title="Get link to place">
                <img src="img/getlink.png" /></div>
        </div>
    </div>

    <!-- autoplay => Track will play automatically if user has clicked at least once in the page. -->
    <div id="audiodiv" class="avbox"><audio id='audiocontrol' controls='controls' autoplay='autoplay'
            type='audio/mpeg'></audio></div>

    <!-- Button for adding pics or other files to a place -->
    <div id="addFileButton" class="addButton" title="Llwytho delweddau i roi nhw ar y map"
        onclick="showFileSelectDialog('uploadButton')">++</div>
    <input id="uploadButton" style="display:none;opacity: 0;" onchange="doUploadFiles(this, this.files, null)"
        type="file" title="Llwytho" name="uploadButton" multiple />

    <div id="petals" class="petals ">
        <div id="petaltext" class="petaltext"></div>
    </div>

    <div id="petalMenu" class="menu" onmouseleave="this.style.display='none'">
        <div onclick="onmenuclick(this, titlePicCmd)">Ail-enwi'r ddelwedd/ffeil</div>
        <div onclick="onmenuclick(this, deletePicCmd)">Dileu'r ddelwedd/ffeil</div>
        <div onclick="onmenuclick(this, attachSoundCmd)">Atodi ffeil sain</div>
        <div onclick="onmenuclick(this, rotatePicCmd)">Rotate 90deg</div>
        <!-- <div onclick="onmenuclick(this, movePicCmd)">Symud delwedd/ffeil i le arall</div> -->
    </div>

    <div id="petalTextMenu" class="menu" onmouseleave="this.style.display='none'">
        <div onclick="onmenuclick(this, movePlaceCmd)">Symud lle i'r targed</div>
        <div onclick="onmenuclick(this, deletePlaceCmd)">Dileu'r lle</div>
    </div>

    <div id="lightbox" class="lightbox" onclick="hidePic()">
        <div class="leftside lightboxside" onclick="return doLightBoxNext(-1, event)">
            <div>&#10094;</div>
        </div>
        <div class="rightside lightboxside" onclick="return doLightBoxNext(1, event)">
            <div>&#10095;</div>
        </div>

        <div class="mid">
            <div id="caption" contenteditable onclick="event.cancelBubble=true">Pennawd
            </div>
            <div id="imgcontainer">
                <img id="bigpic" />
            </div>
            <!-- <div id="deletePicButton" onclick='onDeletePic(this.parentElement.parentElement)'>Delete</div> -->
        </div>
    </div>

    <div id="linkDialog" class="dialog" onClick="$(this).hide();">
        <div onclick="noPropagate(event)">Pastiwch linc i dudalen we yma:
            <br />
            <input id="linkRef" type="text" size="20" pattern="https?://.+|\.\/\?place=[0-9]{3}"
                placeholder="http://..." />
            <input type="button" onclick="CompleteCreateLink()" value="Dolen" />
            <span id="linkRemoveOption">
                - neu -
                <br />
                <input type="button" onclick="CompleteRemoveLink()" value="Dileu'r ddolen" />
            </span>
        </div>
    </div>

    <div id="titleDialog" onclick="this.style.display='none'"
        style="display:none;position:absolute;top:0px;left:0px;bottom:0px;right:0px;background-color:rgba(0,0,0,0.5)">
        <div
            style="position:absolute;top:30%;left:50%;margin-left:-30%;background-color:white;border: 2 solid blue; padding:10px;">
            <h2>Golygu'r teitl</h2>
            <input id="titleInput" type="text" size="80" onchange="onTitleDialog(this.value)" />
        </div>
    </div>

    <!-- Input dialog for adding a sound file to a pic -->
    <input id="attachSoundInput" style="display:none;opacity: 0;" onchange="doAttachSound(this)" type="file"
        title="sound file" name="attachSoundInput" />

    <!--div style="position:fixed; top:0px; left: 0px;padding:4px;background-color:yellow" id="msg"></div -->
    <div id="splash">
        <div>
            <div>
                <img src="img/favicon96.png" align="left" />
                <h1>Span Deep Map</h1>
                <h3>Explore a place from many perspectives.</h3>
                <p>The points on this map record nature, poetry, science, feelings,
                    art and history. They have been placed here by people young, old, and in between,
                    who have contributed their knowledge, memories, and ideas.
                </p>
                <p>Move the map around, click the coloured points, and discover the places we've roamed.</p>
                <p>You can add your own places to the map. <button onclick="dohelp()">Show me how.</button></p>
                <span style="color:darkblue">
                    <h1>Map Dwfn Span</h1>
                    <h3>Archwiliwch le o sawl safbwynt.</h3>
                    <p>Mae’r pwyntiau ar y map hwn yn cofnodi natur, barddoniaeth, gwyddoniaeth, teimladau,
                        celf a hanes. Fe'u gosodwyd yma gan bobl ifanc, pobl hen a phobl o bob oedran
                        rhyngddynt, sydd wedi cyfrannu eu gwybodaeth, eu hatgofion a'u syniadau.</p>
                    <p>Symudwch y map o gwmpas, cliciwch ar y pwyntiau lliw, a darganfyddwch y
                        lleoedd rydyn ni wedi crwydro.</p>
                    <p>Gallwch hefyd ychwanegu’r lleoedd sy’n bwysig i chi i’r map. <button onclick="dohelp()">Dangos i
                            mi
                            sut.</button>
                    </p>
                </span>
            </div>
            <div id="bottombox">
                <hr />
                <p id="loadingFlag" style="background-color:yellow">Loading... | Llwytho...</p>
                <button id="continueButton" style="display:none;background-color:lightgreen"
                    onclick="dropSplash()">Continue | Parhewch</button>
                <p><small><a href="https://www.span-arts.org.uk/">Span Arts</a> | <a
                            href="https://www.span-arts.org.uk/privacy-policy/" title="open in new window"
                            target="_blank">Privacy | Preifatrwydd</a></small></p>
                <div>
                    <img src="img/logo-ccc.jpg" />
                    <img src="img/logo-eu.jpg" />
                    <img src="img/logo-arwain.jpg" />
                    <img src="img/logo-pcc.jpg" />
                </div>
            </div>
        </div>
    </div>
    <div id="basehelp" style="display:none">
        <p>Llusgwch y map nes bod y <span id="helpRefTarget">targed <b>^</b></span> yn pwyntio at y lle yr ydych am gofnodi rhywbeth amdano.</p>
        <p id="helpRefTracking">Os ydych chi'n symudol, cliciwch & gt; i olrhain eich safle.</p>
        <p id="helpRefAdd">Cliciwch <b>+</b> i greu lle ar y targed. Yna gallwch chi deipio nodiadau ac ychwanegu lluniau a sain.</p>
        <p id="helpRefAddPics">Os oes gennych luniau o sawl lle, cliciwch <b>++</b> i'w rhoi ar y map.
        </p>
        <button onclick="closeBaseHelp()">Cau hwn ond dangos help wrth i mi weithredu</button>
        <svg id="svg"></svg>
    </div>
    <div id="menu" class="menu"></div>
    <div id="message" class="dialog" onclick="g('message').style.display='none'">
        <div id="messageInner"></div>
    </div>

    <div id="signinDialog" class="dialog" onClick="onClickSignIn()">
        <div>
            <h2>Mewngofnodwch</h2>
            <p>Diolch am gyfrannu at y 'Map Dwfn'!  Cyn i chi ddechrau::</p>
            <input id="consent" type="checkbox" onchange="g('signinButton').disabled= !this.checked " /><i>Rwy'n cadarnhau bod gan ddeunyddiau rwy'n eu cyfrannu cydsyniad eu deiliaid hawlfraint.</i>
            <br />
            <button id='signinButton' onClick="onClickSignIn()" disabled="true">Mewngofnodwch</button>
            <p>(Don't want to sign in? Please email
                <a href="mailto:alan@pantywylan.org">alan@pantywylan.org</a> with additions to the map.)</p>
        </div>
    </div>

    <div id="youtube"
        style="position:absolute;top:0px;bottom:0px;left:0px;right:0px;background-color:rgba(0,0,0,0.5);display:none"
        onclick="this.style.display='none';g('youtubePlayer').src=''">
        <iframe id="youtubePlayer" style="position:absolute;top:20%;left:20%;height:60%;width:60%" type="text/html">
        </iframe>
    </div>
</body>

</html>